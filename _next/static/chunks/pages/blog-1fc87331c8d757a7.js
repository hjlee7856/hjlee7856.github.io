(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{3557:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>H,default:()=>G});var s=a(7876),l=a(7515),r=a(4232);let i=e=>{let[t,a]=(0,r.useState)([]);return{postWithMeta:t,fetchPostMeta:async()=>{a(await (0,l.B)(e))}}};var n=a(6894),o=a(2009);let u=async e=>{let t=(0,o.H9)(n.db,"posts",e);(await (0,o.x7)(t)).exists()||await (0,o.BN)(t,{slug:e,viewCount:0,likeCount:0,createdAt:new Date})},c=async(e,t)=>{let a=(0,o.H9)(n.db,"users",t,"likes",e),s=(0,o.H9)(n.db,"posts",e);(await (0,o.x7)(a)).exists()||(await (0,o.BN)(a,{createdAt:new Date}),await (0,o.mZ)(s,{likeCount:(0,o.GV)(1)}))},d=async(e,t)=>{let a=(0,o.H9)(n.db,"users",t,"likes",e),s=(0,o.H9)(n.db,"posts",e);(await (0,o.x7)(a)).exists()&&(await (0,o.kd)(a),await (0,o.mZ)(s,{likeCount:(0,o.GV)(-1)}))},x=async(e,t)=>{let a=(0,o.H9)(n.db,"users",t,"likes",e);return(await (0,o.x7)(a)).exists()};var g=a(4584);let y=e=>{let[t,a]=(0,r.useState)(!1),{user:s}=(0,g.A)();return(0,r.useEffect)(()=>{u(e.slug),(async()=>{if(!(null==s?void 0:s.uid)){a(!1);return}a(await x(e.slug,s.uid))})()},[null==s?void 0:s.uid,e.slug]),{handleLike:async()=>{if(null==s?void 0:s.uid)if(t){var l;(null!==(l=e.likeCount)&&void 0!==l?l:0)>0&&await d(e.slug,s.uid),a(!1)}else await c(e.slug,s.uid),a(!0);else alert("로그인이 필요한 서비스 입니다.")},likeActive:t}};var h=a(2318),p=a(772),f=a(1662),m=a(2460),w=a(2039),j=a(7268),v=a(6520),A=a(1480);let b=e=>{let{post:t,posts:a}=e,l=(0,A.useRouter)(),{handleLike:r,likeActive:n}=y(t),{fetchPostMeta:o}=i(a);return(0,s.jsx)(m.A,{variant:"outlined",sx:{my:1,borderRadius:"8px","&:hover":{cursor:"pointer"}},onClick:()=>l.push("/blog/posts/".concat(t.slug)),children:(0,s.jsxs)(w.A,{children:[(0,s.jsx)(j.A,{variant:"h5",color:"grey.900",fontWeight:"bold",gutterBottom:!0,children:t.title}),(0,s.jsx)(j.A,{variant:"h6",color:"grey.500",gutterBottom:!0,children:t.title}),(0,s.jsxs)(j.A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:["작성일: ",t.date]}),(0,s.jsxs)(v.A,{display:"flex",gap:1,alignItems:"center",zIndex:2,children:[(0,s.jsxs)(v.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,s.jsx)(f.A,{color:"disabled",fontSize:"small"}),(0,s.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.viewCount})]}),(0,s.jsxs)(v.A,{display:"flex",gap:.5,alignItems:"center",onClick:e=>{e.stopPropagation(),r(),o()},children:[n?(0,s.jsx)(h.A,{color:"disabled",fontSize:"small"}):(0,s.jsx)(p.A,{color:"disabled",fontSize:"small"}),(0,s.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.likeCount})]})]})]})})},k=[{title:"전체",categoryName:""},{title:"개발 일지",categoryName:"development"},{title:"에러 로그",categoryName:"error"},{title:"기타",categoryName:"error"}],C=e=>{let[t,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[i,n]=(0,r.useState)(0);return(0,r.useEffect)(()=>{a(e.filter(e=>""===s||e.category===s))},[e,s]),{filteredPosts:t,changeCategory:(e,t)=>{n(t),l(k[t].categoryName)},value:i}},_=e=>{let[t,a]=(0,r.useState)(1),s=Math.ceil(e.length/10),[l,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{i(e.slice((t-1)*10,10*t))},[t,10,e]),{currentPosts:l,totalPages:s,currentPage:t,setCurrentPage:a}};var S=a(7030),N=a(882),E=a(4147),B=a(918),H=!0;function G(e){let{posts:t}=e,{postWithMeta:a,fetchPostMeta:l}=i(t),{filteredPosts:n,changeCategory:o,value:u}=C(a),{currentPosts:c,totalPages:d,currentPage:x,setCurrentPage:g}=_(n);return(0,r.useEffect)(()=>{l()},[n]),(0,s.jsxs)(v.A,{children:[(0,s.jsx)(v.A,{display:"flex",justifyContent:"flex-start",my:1,children:(0,s.jsx)(S.A,{value:u,onChange:(e,t)=>{o(e,t),g(1)},children:k.map((e,t)=>(0,s.jsx)(N.A,{label:e.title},t))})}),(0,s.jsx)(E.A,{children:c.map((e,t)=>(0,s.jsx)(b,{post:e,posts:c},t))}),(0,s.jsx)(v.A,{display:"flex",justifyContent:"center",my:3,children:(0,s.jsx)(B.A,{count:d,page:x,onChange:(e,t)=>g(t),color:"primary",shape:"rounded"})})]})}},4267:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog",function(){return a(3557)}])},7515:(e,t,a)=>{"use strict";a.d(t,{B:()=>r,E:()=>i});var s=a(6894),l=a(2009);let r=async e=>{let t={},a=(0,l.rJ)(s.db,"posts"),r=e.map(e=>e.slug),i=(0,l.P)(a,(0,l._M)("slug","in",r));try{(await (0,l.GG)(i)).forEach(e=>{t[e.id]=e.data()})}catch(e){console.error("Error getting documents: ",e)}return e.map(e=>({...e,...t[e.slug]}))},i=async e=>{let t=(0,l.H9)(s.db,"posts",e),a=await (0,l.x7)(t);if(a.exists())return a.data()}}},e=>{var t=t=>e(e.s=t);e.O(0,[928,636,593,792],()=>t(4267)),_N_E=e.O()}]);