(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{4267:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog",function(){return a(8999)}])},8143:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var l=a(4232);let r=e=>{let[t,a]=(0,l.useState)(1);return{totalPages:Math.ceil(e/5),currentPage:t,setCurrentPage:a,perPage:5}}},8999:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>P,default:()=>z});var l=a(7876),r=a(6894),s=a(2009);let i=async e=>{let t=(0,s.H9)(r.db,"posts",e);(await (0,s.x7)(t)).exists()||await (0,s.BN)(t,{slug:e,viewCount:0,likeCount:0,createdAt:new Date})},n=async(e,t)=>{let a=(0,s.H9)(r.db,"users",t,"likes",e),l=(0,s.H9)(r.db,"posts",e);(await (0,s.x7)(a)).exists()||(await (0,s.BN)(a,{createdAt:new Date}),await (0,s.mZ)(l,{likeCount:(0,s.GV)(1)}))},o=async(e,t)=>{let a=(0,s.H9)(r.db,"users",t,"likes",e),l=(0,s.H9)(r.db,"posts",e);(await (0,s.x7)(a)).exists()&&(await (0,s.kd)(a),await (0,s.mZ)(l,{likeCount:(0,s.GV)(-1)}))},u=async(e,t)=>{let a=(0,s.H9)(r.db,"users",t,"likes",e);return(await (0,s.x7)(a)).exists()};var d=a(4584),c=a(4232);let g=e=>{let[t,a]=(0,c.useState)(!1),{user:l}=(0,d.A)();return(0,c.useEffect)(()=>{i(e.slug),(async()=>{if(!(null==l?void 0:l.uid)){a(!1);return}a(await u(e.slug,l.uid))})()},[null==l?void 0:l.uid,e.slug]),{handleLike:async()=>{if(null==l?void 0:l.uid)if(t){var r;(null!==(r=e.likeCount)&&void 0!==r?r:0)>0&&await o(e.slug,l.uid),a(!1)}else await n(e.slug,l.uid),a(!0);else alert("로그인이 필요한 서비스 입니다.")},likeActive:t}};var x=a(2318),h=a(772),y=a(1662),p=a(2460),f=a(2039),m=a(7268),j=a(6520),A=a(4587),b=a.n(A),v=a(1480);let w=e=>{let{post:t}=e,a=(0,v.useRouter)(),{handleLike:r,likeActive:s}=g(t);return(0,l.jsx)(p.A,{variant:"outlined",sx:{my:1,borderRadius:"8px","&:hover":{cursor:"pointer"}},onClick:()=>a.push("/blog/posts/".concat(t.slug)),children:(0,l.jsxs)(f.A,{children:[(0,l.jsx)(m.A,{variant:"h5",color:"grey.900",fontWeight:"bold",gutterBottom:!0,children:t.title}),(0,l.jsx)(m.A,{variant:"body1",color:"grey.500",gutterBottom:!0,children:t.subTitle}),(0,l.jsx)(m.A,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:t.createdAt.toDate().toLocaleString()}),(0,l.jsx)(m.A,{variant:"body1",color:"grey.900",gutterBottom:!0,children:t.author}),(0,l.jsx)(m.A,{variant:"body1",color:"grey.900",gutterBottom:!0,children:t.category}),(0,l.jsx)(b(),{src:t.thumbnail,alt:"썸네일 이미지",width:150,height:150}),(0,l.jsxs)(j.A,{display:"flex",gap:1,alignItems:"center",zIndex:2,children:[(0,l.jsxs)(j.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,l.jsx)(y.A,{color:"disabled",fontSize:"small"}),(0,l.jsx)(m.A,{variant:"body2",color:"textSecondary",children:t.viewCount})]}),(0,l.jsxs)(j.A,{display:"flex",gap:.5,alignItems:"center",onClick:e=>{e.stopPropagation(),r()},children:[s?(0,l.jsx)(x.A,{color:"disabled",fontSize:"small"}):(0,l.jsx)(h.A,{color:"disabled",fontSize:"small"}),(0,l.jsx)(m.A,{variant:"body2",color:"textSecondary",children:t.likeCount})]})]})]})})},k=[{categoryName:"전체"},{categoryName:"개발 일지"},{categoryName:"에러 로그"},{categoryName:"기타"}],C=e=>{let[t,a]=(0,c.useState)([]),[l,r]=(0,c.useState)("전체"),[s,i]=(0,c.useState)(0);return(0,c.useEffect)(()=>{a(e.filter(e=>"전체"===l||e.category===l))},[e,l]),{filteredPosts:t,changeCategory:(e,t)=>{i(t),r(k[t].categoryName)},value:s}};var _=a(8143);let S=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,[l,i]=(0,c.useState)([]);return(0,c.useEffect)(()=>{if(!e.length)return;let l=(0,s.rJ)(r.db,"posts"),n=(t-1)*a,o=e.slice(n,n+a).map(e=>e.slug),u=(0,s.aQ)((0,s.P)(l,(0,s._M)("slug","in",o)),t=>{let a={};t.forEach(e=>{a[e.id]=e.data()}),i(e.map(e=>({...e,...a[e.slug]})))});return()=>u()},[e]),{postWithMeta:l}};var N=a(7030),E=a(882),B=a(8583),H=a(3830),P=!0;function z(e){let{posts:t}=e,{currentPage:a,setCurrentPage:r,totalPages:s,perPage:i}=(0,_.W)(t.length),{postWithMeta:n}=S(t,a,i),{filteredPosts:o,changeCategory:u,value:d}=C(n);return(0,l.jsxs)(j.A,{children:[(0,l.jsx)(j.A,{display:"flex",justifyContent:"flex-start",my:1,children:(0,l.jsx)(N.A,{value:d,onChange:(e,t)=>{u(e,t),r(1)},children:k.map((e,t)=>(0,l.jsx)(E.A,{label:e.categoryName},t))})}),(0,l.jsx)(B.A,{sx:{paddingX:"0 !important"},children:o.map((e,t)=>(0,l.jsx)(w,{post:e},t))}),(0,l.jsx)(j.A,{display:"flex",justifyContent:"center",my:3,children:(0,l.jsx)(H.A,{count:s,page:a,onChange:(e,t)=>r(t),color:"primary",shape:"rounded"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[573,910,636,593,792],()=>t(4267)),_N_E=e.O()}]);