(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{433:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSG:()=>Y,default:()=>G});var a=s(7876),l=s(3932),r=s(6894),i=s(2009);let n=async e=>{let t=(0,i.H9)(r.db,"posts",e);(await (0,i.x7)(t)).exists()||await (0,i.BN)(t,{slug:e,viewCount:0,likeCount:0,createdAt:new Date})},o=async(e,t)=>{let s=(0,i.H9)(r.db,"users",t,"likes",e),a=(0,i.H9)(r.db,"posts",e);(await (0,i.x7)(s)).exists()||(await (0,i.BN)(s,{createdAt:new Date}),await (0,i.mZ)(a,{likeCount:(0,i.GV)(1)}))},d=async(e,t)=>{let s=(0,i.H9)(r.db,"users",t,"likes",e),a=(0,i.H9)(r.db,"posts",e);(await (0,i.x7)(s)).exists()&&(await (0,i.kd)(s),await (0,i.mZ)(a,{likeCount:(0,i.GV)(-1)}))},x=async(e,t)=>{let s=(0,i.H9)(r.db,"users",t,"likes",e);return(await (0,i.x7)(s)).exists()};var c=s(4584),u=s(4232);let p=e=>{let[t,s]=(0,u.useState)(!1),{user:a}=(0,c.A)();return(0,u.useEffect)(()=>{n(e.slug),(async()=>{if(!(null==a?void 0:a.uid)){s(!1);return}s(await x(e.slug,a.uid))})()},[null==a?void 0:a.uid,e.slug]),{handleLike:async()=>{if(null==a?void 0:a.uid)if(t){var l;(null!==(l=e.likeCount)&&void 0!==l?l:0)>0&&await d(e.slug,a.uid),s(!1)}else await o(e.slug,a.uid),s(!0);else alert("로그인이 필요한 서비스 입니다.")},likeActive:t}};var h=s(4687),f=s(2318),y=s(772),m=s(1662),g=s(6520),j=s(7268),A=s(6557),b=s.n(A);let v=e=>{let{post:t}=e,{handleLike:s,likeActive:l}=p(t);return(0,a.jsxs)(g.A,{display:"flex",justifyContent:"space-between",sx:{marginTop:{xs:2,sm:0}},children:[(0,a.jsxs)(g.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.createdAt&&b()(t.createdAt.toDate()).format("YYYY년 MM월 DD일")}),(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:"•"}),(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.author})]}),(0,a.jsxs)(g.A,{display:"flex",gap:1,alignItems:"center",children:[(0,a.jsxs)(g.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,a.jsx)(m.A,{color:"disabled",fontSize:"small"}),(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.viewCount})]}),(0,a.jsxs)(g.A,{display:"flex",gap:.5,alignItems:"center",onClick:e=>{e.stopPropagation(),s()},children:[l?(0,a.jsx)(f.A,{color:"disabled",fontSize:"small"}):(0,a.jsx)(y.A,{color:"disabled",fontSize:"small"}),(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.likeCount})]}),(0,a.jsxs)(g.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,a.jsx)(h.A,{color:"disabled",fontSize:"small"}),(0,a.jsx)(j.A,{variant:"body2",color:"textSecondary",children:t.commentCount})]})]})]})};var w=s(4587),k=s.n(w);let C=e=>{let{post:t}=e;return(0,a.jsx)(g.A,{position:"relative",borderRadius:"8px",overflow:"hidden",sx:{width:{xs:"120px",sm:"180px"},height:{xs:"67.5px",sm:"101.25px"},flexShrink:0,margin:{xs:0,sm:1}},children:(0,a.jsx)(k(),{src:t.thumbnail,alt:"썸네일 이미지",fill:!0})})},S=e=>{let{post:t}=e;return(0,a.jsxs)(g.A,{children:[(0,a.jsx)(j.A,{variant:"h5",color:"textPrimary",fontWeight:"bold",gutterBottom:!0,sx:{maxWidth:"100%",wordBreak:"break-word",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title}),(0,a.jsx)(j.A,{variant:"body1",color:"textSecondary",gutterBottom:!0,sx:{maxWidth:"100%",wordBreak:"break-word",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.subTitle})]})};var _=s(2460),N=s(2039),D=s(1480);let E=e=>{let{post:t}=e,s=(0,D.useRouter)();return(0,a.jsx)(_.A,{variant:"outlined",sx:{my:1,borderRadius:"8px","&:hover":{cursor:"pointer"}},onClick:()=>s.push("/posts/".concat(t.slug)),children:(0,a.jsx)(N.A,{sx:{pb:"16px !important"},children:(0,a.jsxs)(g.A,{display:"flex",justifyContent:"space-between",children:[(0,a.jsxs)(g.A,{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{mr:{xs:0,sm:2}},children:[(0,a.jsxs)(g.A,{sx:{display:{xs:"flex"},flex:{xs:"1"},flexDirection:{xs:"row"}},justifyContent:"space-between",children:[(0,a.jsx)(S,{post:t}),(0,a.jsx)(g.A,{sx:{display:{xs:"flex",sm:"none"},alignItems:"center"},children:(0,a.jsx)(C,{post:t})})]}),(0,a.jsx)(v,{post:t})]}),(0,a.jsx)(g.A,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:(0,a.jsx)(C,{post:t})})]})})})};var I=s(8583);let W=e=>{let{filteredPosts:t}=e;return(0,a.jsx)(I.A,{sx:{paddingX:"0 !important"},children:t.map((e,t)=>(0,a.jsx)(E,{post:e},t))})},B=[{categoryName:"전체"},{categoryName:"개발 일지"},{categoryName:"에러 로그"},{categoryName:"기타"}],P=e=>{let[t,s]=(0,u.useState)([]),[a,l]=(0,u.useState)("전체"),[r,i]=(0,u.useState)(0);return(0,u.useEffect)(()=>{s(e.filter(e=>"전체"===a||e.category===a))},[e,a]),{filteredPosts:t,changeCategory:(e,t)=>{i(t),l(B[t].categoryName)},value:r}};var H=s(8143);let T=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,[a,l]=(0,u.useState)([]);return(0,u.useEffect)(()=>{if(!e.length)return;let a=(0,i.rJ)(r.db,"posts"),n=(t-1)*s,o=e.slice(n,n+s).map(e=>e.slug),d=(0,i.aQ)((0,i.P)(a,(0,i._M)("slug","in",o)),t=>{let s={};t.forEach(e=>{s[e.id]=e.data()}),l(e.map(e=>({...e,...s[e.slug]})))});return()=>d()},[e]),{postWithMeta:a}};var z=s(7030),M=s(882),O=s(3830),Y=!0;function G(e){let{posts:t}=e,{currentPage:s,setCurrentPage:r,totalPages:i,perPage:n}=(0,H.W)(t.length),{postWithMeta:o}=T(t,s,n),{filteredPosts:d,changeCategory:x,value:c}=P(o);return t?(d.length>0&&d.filter(e=>e.createdAt&&"function"==typeof e.createdAt.toDate).sort((e,t)=>{var s,a;let l=null!==(s=e.createdAt.toDate().getTime())&&void 0!==s?s:0;return(null!==(a=t.createdAt.toDate().getTime())&&void 0!==a?a:0)-l}),(0,a.jsxs)(I.A,{children:[(0,a.jsx)(g.A,{display:"flex",justifyContent:"flex-start",my:1,children:(0,a.jsx)(z.A,{value:c,onChange:(e,t)=>{x(e,t),r(1)},children:B.map((e,t)=>(0,a.jsx)(M.A,{label:e.categoryName},t))})}),(0,a.jsx)(W,{filteredPosts:d}),(0,a.jsx)(g.A,{display:"flex",justifyContent:"center",my:3,children:(0,a.jsx)(O.A,{count:i,page:s,onChange:(e,t)=>r(t),color:"primary",shape:"rounded"})})]})):(0,a.jsx)(l.A,{})}},3932:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(7876),l=s(6520),r=s(5965);let i=()=>(0,a.jsx)(l.A,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(r.A,{})})},6760:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(433)}])},8143:(e,t,s)=>{"use strict";s.d(t,{W:()=>l});var a=s(4232);let l=e=>{let[t,s]=(0,a.useState)(1);return{totalPages:Math.ceil(e/5),currentPage:t,setCurrentPage:s,perPage:5}}}},e=>{var t=t=>e(e.s=t);e.O(0,[573,32,636,593,792],()=>t(6760)),_N_E=e.O()}]);