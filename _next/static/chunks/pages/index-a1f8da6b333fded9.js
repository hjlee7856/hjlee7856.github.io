(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{3932:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var s=l(7876),i=l(6520),r=l(5965);let n=()=>(0,s.jsx)(i.A,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(r.A,{})})},6760:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(7273)}])},7273:(e,t,l)=>{"use strict";l.r(t),l.d(t,{__N_SSG:()=>O,default:()=>G});var s=l(7876),i=l(1648),r=l(6520),n=l(7030),a=l(882);let o=e=>{let{changeCategory:t,value:l,setCurrentPage:o}=e;return(0,s.jsx)(r.A,{display:"flex",justifyContent:"flex-start",sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsx)(n.A,{value:l,onChange:(e,l)=>{t(e,l),o(1)},variant:"scrollable",children:i.L.map((e,t)=>(0,s.jsx)(a.A,{label:e.categoryName},t))})})};var d=l(3932),x=l(6894),c=l(2009);let u=async e=>{let t=(0,c.H9)(x.db,"posts",e);(await (0,c.x7)(t)).exists()||await (0,c.BN)(t,{slug:e,viewCount:0,likeCount:0,createdAt:new Date})},p=async(e,t)=>{let l=(0,c.H9)(x.db,"users",t,"likes",e),s=(0,c.H9)(x.db,"posts",e);(await (0,c.x7)(l)).exists()||(await (0,c.BN)(l,{createdAt:new Date}),await (0,c.mZ)(s,{likeCount:(0,c.GV)(1)}))},h=async(e,t)=>{let l=(0,c.H9)(x.db,"users",t,"likes",e),s=(0,c.H9)(x.db,"posts",e);(await (0,c.x7)(l)).exists()&&(await (0,c.kd)(l),await (0,c.mZ)(s,{likeCount:(0,c.GV)(-1)}))},v=async(e,t)=>{let l=(0,c.H9)(x.db,"users",t,"likes",e);return(await (0,c.x7)(l)).exists()};var f=l(197),j=l(4232);let m=e=>{let[t,l]=(0,j.useState)(!1),{user:s}=(0,f.A)();return(0,j.useEffect)(()=>{u(e.slug),(async()=>{if(!(null==s?void 0:s.uid)){l(!1);return}l(await v(e.slug,s.uid))})()},[null==s?void 0:s.uid,e.slug]),{handleLike:async()=>{if(null==s?void 0:s.uid)if(t){var i;(null!==(i=e.likeCount)&&void 0!==i?i:0)>0&&await h(e.slug,s.uid),l(!1)}else await p(e.slug,s.uid),l(!0);else alert("로그인이 필요한 서비스 입니다.")},likeActive:t}};var y=l(4687),g=l(2318),A=l(772),b=l(1662),w=l(1428);let k=e=>{let{post:t}=e,{handleLike:l,likeActive:i}=m(t);return(0,s.jsxs)(r.A,{display:"flex",justifyContent:"space-between",sx:{marginTop:{xs:2,sm:0}},children:[(0,s.jsxs)(r.A,{display:"flex",gap:.5,alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},children:[(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",children:t.author}),(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",display:{xs:"none",sm:"block"},children:"•"}),(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",children:t.createdAt&&t.createdAt.toLocaleString()})]}),(0,s.jsxs)(r.A,{display:"flex",gap:1,alignItems:{xs:"flex-end",sm:"center"},children:[(0,s.jsxs)(r.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,s.jsx)(b.A,{color:"disabled",fontSize:"small"}),(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",children:t.viewCount})]}),(0,s.jsxs)(r.A,{display:"flex",gap:.5,alignItems:"center",onClick:e=>{e.stopPropagation(),l()},children:[i?(0,s.jsx)(g.A,{color:"disabled",fontSize:"small"}):(0,s.jsx)(A.A,{color:"disabled",fontSize:"small"}),(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",children:t.likeCount})]}),(0,s.jsxs)(r.A,{display:"flex",gap:.5,alignItems:"center",children:[(0,s.jsx)(y.A,{color:"disabled",fontSize:"small"}),(0,s.jsx)(w.A,{variant:"body2",color:"textSecondary",children:t.commentCount})]})]})]})};var C=l(4587),S=l.n(C);let _=e=>{let{post:t}=e;return(0,s.jsx)(r.A,{position:"relative",borderRadius:"8px",overflow:"hidden",sx:{width:{xs:"120px",sm:"180px"},height:{xs:"67.5px",sm:"101.25px"},flexShrink:0,margin:{xs:0,sm:1}},children:(0,s.jsx)(S(),{src:t.thumbnail,alt:"썸네일 이미지",fill:!0})})},B=e=>{let{post:t}=e;return(0,s.jsxs)(r.A,{position:"relative",width:"100%",children:[(0,s.jsx)(w.A,{variant:"h6",gutterBottom:!0,sx:{maxWidth:"95%",wordBreak:"break-word",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title}),(0,s.jsx)(w.A,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0,sx:{maxWidth:"95%",wordBreak:"break-word",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.subTitle})]})};var I=l(2460),N=l(2039),E=l(1480);let P=e=>{let{post:t}=e,l=(0,E.useRouter)();return(0,s.jsx)(I.A,{variant:"outlined",sx:{my:1,borderRadius:"8px","&:hover":{cursor:"pointer"}},onClick:()=>l.push("/posts/".concat(t.slug)),children:(0,s.jsx)(N.A,{sx:{pb:"16px !important"},children:(0,s.jsxs)(r.A,{display:"flex",justifyContent:"space-between",children:[(0,s.jsxs)(r.A,{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{mr:{xs:0,sm:2}},children:[(0,s.jsxs)(r.A,{sx:{display:{xs:"flex"},flex:{xs:"1"},flexDirection:{xs:"row"}},justifyContent:"space-between",children:[(0,s.jsx)(B,{post:t}),(0,s.jsx)(r.A,{sx:{display:{xs:"flex",sm:"none"},alignItems:"center"},children:(0,s.jsx)(_,{post:t})})]}),(0,s.jsx)(k,{post:t})]}),(0,s.jsx)(r.A,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:(0,s.jsx)(_,{post:t})})]})})})};var W=l(964);let D=e=>{let{filteredPosts:t}=e;return(0,s.jsx)(W.A,{sx:{paddingX:"0 !important"},children:t.map((e,t)=>(0,s.jsx)(P,{post:e},t))})};var H=l(6786),T=l(8143);let z=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,[s,i]=(0,j.useState)([]);return(0,j.useEffect)(()=>{if(!e.length)return;let s=(0,c.rJ)(x.db,"posts"),r=(t-1)*l,n=e.slice(r,r+l).map(e=>e.slug),a=(0,c.P)(s,(0,c._M)("slug","in",n)),o=(0,c.aQ)(a,t=>{try{let l={};t.forEach(e=>{l[e.id]=e.data()});let s=e.map(e=>{var t,s,i;let r=l[e.slug];return{...e,...r,createdAt:null!==(i=null==r?void 0:null===(s=r.createdAt)||void 0===s?void 0:null===(t=s.toDate)||void 0===t?void 0:t.call(s))&&void 0!==i?i:null}}).sort((e,t)=>{var l,s,i,r,n,a;let o=null!==(n=null===(s=e.createdAt)||void 0===s?void 0:null===(l=s.getTime)||void 0===l?void 0:l.call(s))&&void 0!==n?n:0;return(null!==(a=null===(r=t.createdAt)||void 0===r?void 0:null===(i=r.getTime)||void 0===i?void 0:i.call(r))&&void 0!==a?a:0)-o});i(s)}catch(e){}},e=>{});return()=>o()},[e,t]),{postWithMeta:s}};var L=l(3830),O=!0;function G(e){let{posts:t}=e,{currentPage:l,setCurrentPage:i,totalPages:n,perPage:a}=(0,T.W)(t.length),{postWithMeta:x}=z(t,l,a),{filteredPosts:c,changeCategory:u,selectIdx:p}=(0,H.e)(x);return t?(0,s.jsxs)(r.A,{children:[(0,s.jsx)(o,{changeCategory:u,setCurrentPage:i,value:p}),(0,s.jsx)(D,{filteredPosts:c}),(0,s.jsx)(r.A,{display:"flex",justifyContent:"center",my:3,children:(0,s.jsx)(L.A,{count:n,page:l,onChange:(e,t)=>i(t),color:"primary",shape:"rounded"})})]}):(0,s.jsx)(d.A,{})}},8143:(e,t,l)=>{"use strict";l.d(t,{W:()=>i});var s=l(4232);let i=e=>{let[t,l]=(0,s.useState)(1);return{totalPages:Math.ceil(e/5),currentPage:t,setCurrentPage:l,perPage:5}}}},e=>{var t=t=>e(e.s=t);e.O(0,[573,340,636,593,792],()=>t(6760)),_N_E=e.O()}]);