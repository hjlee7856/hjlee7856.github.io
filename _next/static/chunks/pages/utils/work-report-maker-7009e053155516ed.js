(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{132:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var l=n(7876),i=n(6520),s=n(1428);let a=e=>(0,l.jsxs)(i.A,{children:[(0,l.jsx)(s.A,{variant:"h5",fontWeight:"bold",children:e.title}),(0,l.jsx)(s.A,{variant:"body2",color:"text.secondary",mt:.5,children:e.subTitle.split("\n").map((e,t)=>(0,l.jsxs)("span",{children:[e,(0,l.jsx)("br",{})]},t))})]})},1105:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var l=n(7876),i=n(5252),s=n(132),a=n(2382),r=n(2781),o=n(6520),c=n(1428),d=n(3410),h=n(6448),x=n(4527),u=n(3890),g=n(4694),j=n(2199),A=n(4232);let p=e=>{let[t,n]=(0,A.useState)(!1),[i,s]=(0,A.useState)(!1),[p,m]=(0,A.useState)(!1),[y,f]=(0,A.useState)(""),[v,k]=(0,A.useState)(!1),E=async()=>{await navigator.clipboard.writeText(y),k(!0)};return(0,A.useEffect)(()=>{let n=e.text.split("\n"),l=n[0];l=l.replace(/\s*\(오전 반차\)/,"").replace(/\s*\(오후 반차\)/,""),i?l+=" (오전 반차)":p&&(l+=" (오후 반차)"),n[0]=l;let s=n.join("\n");t&&(s+="\n@devops"),f(s)},[e.text,t,i,p]),(0,l.jsxs)(o.A,{flex:1,flexDirection:"column",children:[(0,l.jsx)(o.A,{display:"flex",flex:1,mb:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:(0,l.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",children:"미리보기"})}),(0,l.jsxs)(o.A,{position:"relative",children:[(0,l.jsx)(d.A,{multiline:!0,fullWidth:!0,minRows:10,value:y,onChange:e=>f(e.target.value),sx:{borderRadius:2}}),(0,l.jsx)(h.A,{title:"클립보드에 복사",sx:{position:"absolute",right:1,top:1},children:(0,l.jsx)(x.A,{size:"small",onClick:E,children:(0,l.jsx)(a.A,{fontSize:"small"})})}),(0,l.jsx)(h.A,{title:"초기화",sx:{position:"absolute",right:1,bottom:1},children:(0,l.jsx)(x.A,{size:"small",onClick:()=>{n(!1),f(""),e.resetData()},children:(0,l.jsx)(r.A,{fontSize:"small",color:"error"})})})]}),(0,l.jsx)(u.A,{control:(0,l.jsx)(g.A,{checked:t,onChange:e=>n(e.target.checked)}),label:"개발팀"}),(0,l.jsx)(u.A,{control:(0,l.jsx)(g.A,{checked:i,onChange:e=>{s(e.target.checked),m(!1)}}),label:"오전반차"}),(0,l.jsx)(u.A,{control:(0,l.jsx)(g.A,{checked:p,onChange:e=>{s(!1),m(e.target.checked)}}),label:"오후반차"}),(0,l.jsx)(j.A,{open:v,autoHideDuration:2e3,onClose:()=>k(!1),message:"보고서가 클립보드에 복사되었습니다.",anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})};var m=n(9474),y=n(5582),f=n(4676),v=n(9858),k=n(7461);let E=e=>{let[t,n]=(0,A.useState)(""),[i,s]=(0,A.useState)(""),a=()=>{e.handleAdd(e.section,t,i),r(),e.setIsAdding(!1)},r=()=>{n(""),s(""),e.setIsAdding(!1)},o=e=>{"Enter"===e.key&&a()};return(0,l.jsxs)(f.A,{sx:{backgroundColor:k.A[50]},children:[(0,l.jsx)(v.A,{children:(0,l.jsx)(d.A,{error:""===t,label:""===t?"필수":"카테고리",value:t,onChange:e=>n(e.target.value),fullWidth:!0,size:"small",onKeyDown:o})}),(0,l.jsx)(v.A,{children:(0,l.jsx)(d.A,{label:"내용",value:i,onChange:e=>s(e.target.value),fullWidth:!0,size:"small",onKeyDown:o})}),(0,l.jsxs)(v.A,{align:"right",children:[(0,l.jsx)(h.A,{title:"저장",children:(0,l.jsx)(x.A,{onClick:a,size:"small",children:(0,l.jsx)(m.A,{fontSize:"small"})})}),(0,l.jsx)(h.A,{title:"취소",children:(0,l.jsx)(x.A,{onClick:r,size:"small",children:(0,l.jsx)(y.A,{fontSize:"small"})})})]})]})};var b=n(2989),w=n(6149),C=n(6115),S=n(451),z=n(8423),D=n(1413);let K=e=>{let[t,n]=(0,A.useState)(!1),[i,s]=(0,A.useState)(null),a=(0,A.useRef)(null),u=t=>{e.setEditingMap(e=>({...e,[t.content]:{section:t.section,category:t.category,content:t.content}})),e.setEditingKey("".concat(t.section,"-").concat(t.category,"-").concat(t.content))},g=(t,n)=>{"Enter"===t.key&&(e.handleSaveEdit(n),e.setEditingKey(null))};return(0,A.useEffect)(()=>{let t=t=>{e.editingKey&&a.current&&!a.current.contains(t.target)&&e.setEditingKey(null)};return e.editingKey&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e.editingKey]),(0,l.jsxs)(o.A,{sx:{overflowX:"auto",minHeight:"200px"},children:[(0,l.jsxs)(o.A,{display:"flex",alignItems:"center",children:[(0,l.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",children:e.section}),(0,l.jsx)(h.A,{title:"추가하기",children:(0,l.jsx)(x.A,{onClick:()=>{n(!0)},size:"small",children:(0,l.jsx)(b.A,{fontSize:"small",color:"primary"})})})]}),(0,l.jsxs)(S.A,{size:"small",sx:{minWidth:300},children:[(0,l.jsx)(z.A,{children:(0,l.jsxs)(f.A,{children:[(0,l.jsx)(v.A,{children:"카테고리"}),(0,l.jsx)(v.A,{children:"내용"}),(0,l.jsx)(v.A,{align:"right"})]})}),(0,l.jsxs)(D.A,{children:[t&&(0,l.jsx)(E,{section:e.section,handleAdd:e.handleAdd,setIsAdding:n}),e.allContentItems.map((t,n)=>{var o,j,A,p,y,k;let E="".concat(t.section,"-").concat(t.category,"-").concat(t.content),b=e.editingKey===E,S=i===n,z=(0,l.jsxs)(f.A,{ref:b?a:null,component:"tr",onMouseEnter:()=>s(n),onMouseLeave:()=>s(null),sx:{cursor:"pointer"},hover:!0,selected:b,onClick:()=>u(t),children:[(0,l.jsx)(v.A,{sx:{wordBreak:"break-all",paddingY:1.1},children:b?(0,l.jsx)(d.A,{error:(null===(o=e.editingMap[t.content])||void 0===o?void 0:o.category)==="",label:(null===(j=e.editingMap[t.content])||void 0===j?void 0:j.category)===""?"필수":"카테고리",value:null!==(y=null===(A=e.editingMap[t.content])||void 0===A?void 0:A.category)&&void 0!==y?y:t.category,onChange:n=>e.handleEditChange(t.content,"category",n.target.value),size:"small",onKeyDown:e=>g(e,t.content)}):(0,l.jsx)(c.A,{children:t.category})}),(0,l.jsx)(v.A,{sx:{wordBreak:"break-all"},children:b?(0,l.jsx)(d.A,{label:"내용",value:null!==(k=null===(p=e.editingMap[t.content])||void 0===p?void 0:p.content)&&void 0!==k?k:t.content,onChange:n=>e.handleEditChange(t.content,"content",n.target.value),size:"small",onKeyDown:e=>g(e,t.content)}):(0,l.jsx)(c.A,{children:t.content})}),b&&(0,l.jsxs)(v.A,{align:"right",sx:{minWidth:"150px"},children:[(0,l.jsx)(h.A,{title:"저장",children:(0,l.jsx)(x.A,{onClick:n=>{n.stopPropagation(),e.handleSaveEdit(t.content),e.setEditingKey(null)},size:"small",children:(0,l.jsx)(m.A,{fontSize:"small",color:"success"})})}),"금일 진행 사항"===t.section&&(0,l.jsx)(h.A,{title:"익일로 이동",children:(0,l.jsx)(x.A,{onClick:n=>{n.stopPropagation(),e.handleEditChange(t.content,"section","익일 예정 사항"),e.handleSaveEdit(t.content,"익일 예정 사항"),e.setEditingKey(null)},size:"small",children:(0,l.jsx)(C.A,{fontSize:"small",color:"primary"})})}),"익일 예정 사항"===t.section&&(0,l.jsx)(h.A,{title:"금일로 이동",children:(0,l.jsx)(x.A,{onClick:n=>{n.stopPropagation(),e.handleEditChange(t.content,"section","금일 진행 사항"),e.handleSaveEdit(t.content,"금일 진행 사항"),e.setEditingKey(null)},size:"small",children:(0,l.jsx)(w.A,{fontSize:"small",color:"primary"})})})]}),S&&!b&&(0,l.jsx)(v.A,{align:"right",sx:{minWidth:"150px"},children:(0,l.jsx)(h.A,{title:"삭제",children:(0,l.jsx)(x.A,{onClick:n=>{n.stopPropagation(),e.handleDelete(t.section,t.category,t.content),e.setEditingKey(null)},size:"small",children:(0,l.jsx)(r.A,{fontSize:"small",color:"error"})})})}),!S&&!b&&(0,l.jsx)(v.A,{sx:{minWidth:"150px"}})]});return b?z:(0,l.jsx)(h.A,{title:"클릭해서 수정",arrow:!0,children:z},E)})]})]})]})};var M=n(6924),O=n(2009);let _=async(e,t)=>{try{let n=(0,O.H9)(M.db,"workReports",t.uid);(await (0,O.x7)(n)).exists()?await (0,O.mZ)(n,{workReportData:e,updatedAt:new Date}):await (0,O.BN)(n,{workReportData:e,createdAt:new Date})}catch(e){console.error("Failed to edit work report:",e)}},I=async e=>{try{let t=(0,O.H9)(M.db,"workReports",e.uid),n=await (0,O.x7)(t);if(n.exists())return JSON.parse(n.data().workReportData);return null}catch(e){return null}};var N=n(197);let W="workReportData",R=()=>{let[e,t]=(0,A.useState)({}),[n,l]=(0,A.useState)({}),[i,s]=(0,A.useState)(null),{user:a}=(0,N.A)(),r=()=>{t({})};(0,A.useEffect)(()=>{(async()=>{if(a){let e=await I(a);e&&t(e)}else{let e=localStorage.getItem(W);e&&t(JSON.parse(e))}})()},[a]),(0,A.useEffect)(()=>{(async()=>{a?await _(JSON.stringify(e),a):localStorage.setItem(W,JSON.stringify(e))})()},[e,a,r]);let o=Object.entries(e).sort((e,t)=>{let[n]=e,[l]=t;return n.localeCompare(l)}).map(e=>{let[t,n]=e,l=Object.entries(n).map(e=>{let[t,n]=e,l=n.filter(e=>""!==e.trim());if(0===l.length)return"● ".concat(t);let i=l.map(e=>"    ○ ".concat(e)).join("\n");return t.trim()?"● ".concat(t,"\n").concat(i):i}).join("\n");return l?"".concat("[".concat(t,"]"),"\n").concat(l):""}).join("\n\n").trim(),c=Object.entries(e).flatMap(e=>{let[t,n]=e;return Object.entries(n).flatMap(e=>{let[n,l]=e;return l.map(e=>({section:t,category:n,content:e}))})});return{handleAdd:(e,n,l)=>{e&&n&&t(t=>{let i={...t};return i[e]=i[e]||{},i[e][n]=[...i[e][n]||[],l],i})},allContentItems:c,editingMap:n,editingKey:i,handleEditChange:(e,t,n)=>{l(l=>({...l,[e]:{...l[e],[t]:n}}))},handleSaveEdit:(e,i)=>{let s=n[e];if(!s)return;let a=c.find(t=>t.content===e);if(!a)return;let r=i||s.section,o=s.category,d=s.content;t(t=>{let n={...t};return n[a.section][a.category]=n[a.section][a.category].filter(t=>t!==e),0===n[a.section][a.category].length&&delete n[a.section][a.category],0===Object.keys(n[a.section]).length&&delete n[a.section],n[r]=n[r]||{},n[r][o]=[...n[r][o]||[],d],n}),l(t=>{let n={...t};return delete n[e],n})},setEditingMap:l,setEditingKey:s,handleDelete:(e,n,l)=>{t(t=>{let i={...t};return i[e][n]=i[e][n].filter(e=>e!==l),0===i[e][n].length&&delete i[e][n],0===Object.keys(i[e]).length&&delete i[e],i})},text:o,resetData:r}};var P=n(7916);let T=()=>{let{handleAdd:e,allContentItems:t,editingMap:n,editingKey:a,handleEditChange:r,handleSaveEdit:c,setEditingMap:d,setEditingKey:h,handleDelete:x,text:u,resetData:g}=R();return(0,l.jsxs)(i.A,{children:[(0,l.jsx)(s.s,{title:"업무 보고 생성기",subTitle:"업무 보고를 템플릿으로 자동으로 생성 해줍니다. \n 로그인하면 클라우드에 저장됩니다."}),(0,l.jsx)(P.A,{}),(0,l.jsxs)(o.A,{display:"flex",sx:{flexDirection:{xs:"column",sm:"row"}},children:[(0,l.jsxs)(o.A,{display:"flex",flexDirection:"column",gap:8,flex:2,children:[(0,l.jsx)(K,{allContentItems:t.filter(e=>"금일 진행 사항"===e.section),editingMap:n,setEditingMap:d,editingKey:a,setEditingKey:h,handleEditChange:r,handleSaveEdit:c,handleDelete:x,section:"금일 진행 사항",handleAdd:e}),(0,l.jsx)(K,{allContentItems:t.filter(e=>"익일 예정 사항"===e.section),editingMap:n,setEditingMap:d,editingKey:a,setEditingKey:h,handleEditChange:r,handleSaveEdit:c,handleDelete:x,section:"익일 예정 사항",handleAdd:e})]}),(0,l.jsx)(P.A,{orientation:"vertical",flexItem:!0,sx:{mx:3,display:{xs:"none",sm:"block"}}}),(0,l.jsx)(P.A,{sx:{my:3,display:{xs:"block",sm:"none"}}}),(0,l.jsx)(p,{text:u,resetData:g})]})]})}},5252:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var l=n(7876),i=n(6520),s=n(7263);let a=e=>(0,l.jsx)(i.A,{p:2,children:(0,l.jsx)(s.A,{spacing:3,children:e.children})})},8569:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/utils/work-report-maker",function(){return n(1105)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[410,341,660,636,593,792],()=>t(8569)),_N_E=e.O()}]);